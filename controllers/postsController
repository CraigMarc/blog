const Posts = require("../models/posts");
const asyncHandler = require("express-async-handler");
const { body, validationResult } = require("express-validator");

// get all posts
exports.all_posts_get = asyncHandler(async (req, res, next) => {
    
  let allPosts = await Posts.find().exec()
  console.log(allPosts)
  res.json(allPosts)
  
});

// Get single post.
exports.single_post_get = asyncHandler(async (req, res, next) => {

 res.send('hello1')

  });



// POST new message.
exports.create_post = asyncHandler(async (req, res, next) => {

    let currentDate = new Date();
    console.log(currentDate)
    const post = new Posts({
      title: req.body.title,
      text: req.body.text,
      timeStamp: currentDate,
      published: false,

    });

    await post.save();
   
     });


// DELETE message. 

exports.delete_post = asyncHandler(async (req, res, next) => {

    res.send('hellodelete')
   
     });

// PUT edit message

exports.edit_post = asyncHandler(async (req, res, next) => {

    res.send('helloedit')
   
     });